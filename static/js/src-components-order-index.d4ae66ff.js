(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./src/components/Order/index.mdx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ae}));var a=n("./node_modules/father/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("react"),o=n.n(r),i=n("./node_modules/@mdx-js/react/dist/esm.js"),c=n("./node_modules/father/node_modules/docz/dist/index.esm.js"),s=n("./node_modules/father/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),l=(n("./node_modules/antd/es/message/style/index.js"),n("./node_modules/antd/es/message/index.js")),d=n("./node_modules/father/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),u=n("./node_modules/father/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),m=n("./node_modules/father/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),p=n("./node_modules/father/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),f=(n("./node_modules/antd/es/table/style/index.js"),n("./node_modules/antd/es/table/index.js")),b=(n("./node_modules/antd/es/input/style/index.js"),n("./node_modules/antd/es/input/index.js")),O=(n("./node_modules/antd/es/button/style/index.js"),n("./node_modules/antd/es/button/index.js")),_=(n("./node_modules/antd/es/col/style/index.js"),n("./node_modules/antd/es/col/index.js")),j=(n("./node_modules/antd/es/card/style/index.js"),n("./node_modules/antd/es/card/index.js")),g=(n("./node_modules/antd/es/form/style/index.js"),n("./node_modules/antd/es/form/index.js")),v=(n("./node_modules/antd/es/row/style/index.js"),n("./node_modules/antd/es/row/index.js")),P=n("./node_modules/father/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),h=(n("./node_modules/antd/es/date-picker/style/index.js"),n("./node_modules/antd/es/date-picker/index.js")),y=(n("./node_modules/antd/es/select/style/index.js"),n("./node_modules/antd/es/select/index.js")),T="DATERANGE";T===Object(T)&&Object.isExtensible(T)&&Object.defineProperty(T,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DATERANGE",filename:"src/constant.js"}});var E="INPUT";E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"INPUT",filename:"src/constant.js"}});"INPUTNUMBER"===Object("INPUTNUMBER")&&Object.isExtensible("INPUTNUMBER")&&Object.defineProperty("INPUTNUMBER","__filemeta",{enumerable:!0,configurable:!0,value:{name:"INPUTNUMBER",filename:"src/constant.js"}});var A="SELECT";A===Object(A)&&Object.isExtensible(A)&&Object.defineProperty(A,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"SELECT",filename:"src/constant.js"}});"RADIO"===Object("RADIO")&&Object.isExtensible("RADIO")&&Object.defineProperty("RADIO","__filemeta",{enumerable:!0,configurable:!0,value:{name:"RADIO",filename:"src/constant.js"}});"CHECKBOX"===Object("CHECKBOX")&&Object.isExtensible("CHECKBOX")&&Object.defineProperty("CHECKBOX","__filemeta",{enumerable:!0,configurable:!0,value:{name:"CHECKBOX",filename:"src/constant.js"}});var x=y.a.Option,H=h.a.RangePicker,C={labelCol:{span:6},wrapperCol:{span:16}},I=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(){var t=e.props.onSearch,n=e.props.form,a=n.getFieldsValue,r=n.validateFields;t(a(),r)},e.onReset=function(){var t,n=e.props,a=n.onSearch,r=n.filters,o=e.props.form,i=o.setFieldsValue,c=o.validateFields,s={},l=(t={},Object(P.a)(t,T,[]),Object(P.a)(t,E,""),Object(P.a)(t,A,""),t);r.forEach((function(e){var t=e.dataSource,n=E;Array.isArray(t)?n=A:t===T&&(n=T),s[e.name]=l[n]})),i(s),a(s,c)},e.renderForm=function(t){for(var n=[],a=0,r=t&&t.length>0?t.length%3===0?Math.ceil(t.length/3)+1:Math.ceil(t.length/3):0;a<r;a++)n.push(o.a.createElement(v.a,{key:a},e.renderFormItem(a,t)));return o.a.createElement(j.a,{style:{border:"none"}},o.a.createElement(g.a,C,n))},e.renderFormItem=function(t,n){for(var a=[],r=0;r<3;r++){var i=n[3*t+r];i?a.push(o.a.createElement(_.a,{key:r,span:8},e.renderFilterItem(i))):2===r?a.push(o.a.createElement(_.a,{key:r,offset:2,span:6},o.a.createElement(O.a,{onClick:e.onSubmit,type:"primary"},"\u786e\u5b9a"),o.a.createElement(O.a,{onClick:e.onReset,style:{marginLeft:20}},"\u91cd\u7f6e"))):a.push(o.a.createElement(_.a,{key:r,span:8}))}return a},e.renderFilterItem=function(t){var n,a=t.dataSource,r=(n={},Object(P.a)(n,T,e.renderDateRange),Object(P.a)(n,E,e.renderInput),Object(P.a)(n,A,e.renderSelect),n),o=E;return Array.isArray(a)?o=A:a===T&&(o=T),r[o](t)},e.renderInput=function(t){var n=e.props.form.getFieldDecorator;return o.a.createElement(g.a.Item,{label:t.title},n(t.name)(o.a.createElement(b.a,null)))},e.renderSelect=function(t){var n=e.props.form.getFieldDecorator,a=e.props.selectChange;return a||(a=function(){}),o.a.createElement(g.a.Item,{label:t.title},n(t.name,{rules:[{required:t.required||!1,message:t.message||""}]})(o.a.createElement(y.a,{onChange:function(e){a(e,t)}},t.dataSource.map((function(e){return o.a.createElement(x,{key:e.value,value:e.value},e.label)})))))},e.renderDateRange=function(t){var n=e.props.onRangeChange,a=e.props.form.getFieldDecorator;return o.a.createElement(g.a.Item,{label:t.title},a(t.name)(o.a.createElement(H,{onChange:n})))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.parentFun;null===e||void 0===e||e(this.props)}},{key:"render",value:function(){var e=this.props,t=e.dataSource,n=e.pageInfo,a=n.pageSize,r=n.total,i=n.current,c=e.columns,s=e.onChangePage,l=e.filters,d=e.loading,u=e.id,m=e.scroll,p=e.rowSelection;return o.a.createElement(o.a.Fragment,null,this.renderForm(l),o.a.createElement("br",null),o.a.createElement("div",{style:{minHeight:"600px",backgroundColor:"#fff",padding:20}},this.props.children,o.a.createElement(f.a,{rowKey:function(e){return e[u]},columns:c,dataSource:t,loading:d&&d.tableLoading,scroll:m,rowSelection:p,pagination:{pageSize:a,total:r,current:i,onChange:function(e,t){s&&s(e,t)}}})))}}]),n}(o.a.Component),S=(g.a.create()(I),n("./node_modules/axios/index.js")),N=n.n(S),w={development:{cp_plus:{ROOTPATH:"https://gateway-cp-kitchen-admin-api-dev.cpgroupcloud.com/",APIPATH:"https://middle-gw-dev.cook.cpgroup.cn/srv-oms/",OTHERS:{COMPANYURL:"",SHOPURL:""}},cp_cook:{ROOTPATH:"https://api-dev.cook.cpgroup.cn/",APIPATH:"https://middle-gw-dev.cook.cpgroup.cn/srv-oms/",OTHERS:{COMPANYURL:"",SHOPURL:""}},cp_middle:{ROOTPATH:"https://middle-gw-dev.cook.cpgroup.cn/srv-oms/",APIPATH:"https://middle-gw-dev.cook.cpgroup.cn/srv-oms/"}},production:{cp_plus:{ROOTPATH:"https://gateway-cp-kitchen-admin-api.cpgroupcloud.com/",APIPATH:"https://middle-gw.cook.cpgroup.cn/srv-oms/",OTHERS:{COMPANYURL:"",SHOPURL:""}},cp_cook:{ROOTPATH:"https://api.cook.cpgroup.cn/",APIPATH:"https://middle-gw.cook.cpgroup.cn/srv-oms/",OTHERS:{COMPANYURL:"",SHOPURL:""}},cp_middle:{ROOTPATH:"https://middle-gw.cook.cpgroup.cn/srv-oms/",APIPATH:"https://middle-gw.cook.cpgroup.cn/srv-oms/"}}},R=function(){var e=window.localStorage.getItem("mp_env")||"development",t=window.localStorage.getItem("mp_platform")||"cp_middle",n=JSON.parse(window.localStorage.getItem("mp_company")),a={APIPATH:w[e][t].APIPATH,ROOTPATH:w[e][t].ROOTPATH,basic:{mp_env:e,mp_platform:t,mp_company:n}};return console.log("res~28::",a),a};R&&R===Object(R)&&Object.isExtensible(R)&&Object.defineProperty(R,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getConfig",filename:"src/config/config.js"}});var B=new(n("./node_modules/event-emitter/index.js"));function U(){var e=R(),t=e.basic.mp_platform,n=window.localStorage.getItem("token"),a=e.basic.mp_company;Array.isArray(a)||(a=0===a||"0"===a?[]:[a]);var r={appid:100,platform:100},o=Object(s.a)({token:n},r);"cp_cook"===t&&(o=Object(s.a)({Authorization:"Bearer "+n},o));var i=o,c={},d="";"string"===typeof(arguments.length<=0?void 0:arguments[0])?(c=(arguments.length<=1?void 0:arguments[1])||{},d=arguments.length<=0?void 0:arguments[0]):c=arguments.length<=0?void 0:arguments[0],0!==(d=c.url||d).indexOf("http")&&(d=e.APIPATH+d);var u=["company/list","shop/list"],m=["admin/org/company/list","admin/org/store/lists"],p=function(e,t){for(var n=0,a=e.length;n<a;n++){var r=e[n];if(-1!==t.indexOf(r))return!0}return!1},f=p(u,c.url);return new Promise((function(e,n){f||(c.data=Object.assign({},{company_id:a},c.data)),N()({url:d,method:c.method||"get",headers:i,data:c.data,params:((c.method||"get").toUpperCase(),c.params)}).then((function(a){var r=a.data,o=r.code,i={"-1":"\u670d\u52a1\u5668\u7e41\u5fd9\u8bf7\u7a0d\u540e\u518d\u8bd5",402:"\u8bf7\u6c42\u65b9\u5f0f\u4e0d\u652f\u6301",403:"CURL\u8bf7\u6c42\u5931\u8d25",404:"interface\u7f3a\u5c11\u65b9\u6cd5",405:"\u53c2\u6570\u9519\u8bef",406:"\u64cd\u4f5c\u5931\u8d25",407:"\u975e\u6cd5\u64cd\u4f5c",105e3:"\u7528\u6237\u540d\u4e0d\u5b58\u5728",105001:"\u5bc6\u7801\u9519\u8bef",105002:"\u8d26\u6237\u72b6\u6001\u5f02\u5e38",105003:"\u8def\u7531\u5df2\u5b58\u5728",105004:"\u89d2\u8272\u5df2\u5b58\u5728",105005:"\u624b\u673a\u53f7\u7801\u5df2\u88ab\u5360\u7528",105006:"\u8d26\u6237\u4e0d\u5b58\u5728",105007:"\u5bc6\u7801\u9519\u8bef",105010:"\u6ca1\u6709\u64cd\u4f5c\u6743\u9650",105011:"\u516c\u53f8\u540d\u79f0\u5df2\u88ab\u5360\u7528",105012:"\u4e1a\u52a1\u5458\u4e09\u65b9\u7f16\u53f7\u88ab\u5360\u7528"},s={401:"\u9a8c\u7b7e\u5931\u8d25",105008:"\u8d26\u6237\u72b6\u6001\u5f02\u5e38",105009:"\u8bf7\u5148\u767b\u5f55",1101:"\u767b\u5f55\u8fc7\u671f",1008:"\u767b\u5f55\u8fc7\u671f",1100:"\u767b\u5f55\u8fc7\u671f",300:"\u767b\u5f55\u8fc7\u671f"},d=p(m,c.url);if("cp_cook"===t&&d?r&&0!==o:r&&200!==o){var u="";i[o]?(u=i[o],l.a.error(u,.5)):s[o]?(u=s[o],console.log("logout event"),B.emit("logout")):(u=r.msg,l.a.error(u,.5)),n(u)}else e(a)}))}))}function k(e){return e.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()}))}function F(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function D(e){var t={};return Object.keys(e).forEach((function(n){t[k(n)]=e[n]})),t}function Y(e){var t={};return Object.keys(e).forEach((function(n){t[F(n)]=e[n]})),t}function L(e){return e.reduce((function(e,t){return e.push(Y(t)),e}),[])}U&&U===Object(U)&&Object.isExtensible(U)&&Object.defineProperty(U,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"send",filename:"src/util/send.js"}}),k&&k===Object(k)&&Object.isExtensible(k)&&Object.defineProperty(k,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"toHump",filename:"src/util/objectConvert.js"}}),F&&F===Object(F)&&Object.isExtensible(F)&&Object.defineProperty(F,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"toLine",filename:"src/util/objectConvert.js"}}),D&&D===Object(D)&&Object.isExtensible(D)&&Object.defineProperty(D,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"objectToHump",filename:"src/util/objectConvert.js"}}),Y&&Y===Object(Y)&&Object.isExtensible(Y)&&Object.defineProperty(Y,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"objectToLine",filename:"src/util/objectConvert.js"}}),L&&L===Object(L)&&Object.isExtensible(L)&&Object.defineProperty(L,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"arrToLine",filename:"src/util/objectConvert.js"}});var M={100:"\u5f85\u4ed8\u6b3e",200:"\u4ed8\u6b3e\u5b8c\u6210",300:"\u5907\u8d27\u4e2d",400:"\u5f85\u914d\u9001",410:"\u914d\u9001\u4e2d",500:"\u5236\u4f5c\u4e2d",510:"\u5f85\u53d6\u9910",600:"\u5f85\u81ea\u63d0",700:"\u8ba2\u5355\u5b8c\u6210",800:"\u8ba2\u5355\u53d6\u6d88\u4e2d",900:"\u8ba2\u5355\u5df2\u53d6\u6d88"};"undefined"!==typeof M&&M&&M===Object(M)&&Object.isExtensible(M)&&Object.defineProperty(M,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ORDERSTATUS",filename:"src/components/order/constant.js"}});var W={0:"\u672a\u652f\u4ed8",1:"\u5df2\u652f\u4ed8"};"undefined"!==typeof W&&W&&W===Object(W)&&Object.isExtensible(W)&&Object.defineProperty(W,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PAYSTATUS",filename:"src/components/order/constant.js"}});var Z={1:"\u5916\u5356",2:"\u81ea\u63d0",3:"\u5802\u98df"};"undefined"!==typeof Z&&Z&&Z===Object(Z)&&Object.isExtensible(Z)&&Object.defineProperty(Z,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DELIVERYTYPE",filename:"src/components/order/constant.js"}});var J={1:"\u5fae\u4fe1",2:"\u50a8\u503c"};"undefined"!==typeof J&&J&&J===Object(J)&&Object.isExtensible(J)&&Object.defineProperty(J,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PAYTYPE",filename:"src/components/order/constant.js"}});var G={9:"\u4f18\u9c9c",14:"cpcook"};"undefined"!==typeof G&&G&&G===Object(G)&&Object.isExtensible(G)&&Object.defineProperty(G,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ORDERRESOURCE",filename:"src/components/order/constant.js"}});var z=[{text:"\u4ec5\u9000\u6b3e",value:"1",hideCondition:{}},{text:"\u9000\u6b3e\u4e14\u9000\u8d27",value:"2",hideCondition:{1:{code:["200","300","400"]},2:{code:["200","300","600"]},3:{code:[]}}}];"undefined"!==typeof z&&z&&z===Object(z)&&Object.isExtensible(z)&&Object.defineProperty(z,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"REFUNDTYPES",filename:"src/components/order/constant.js"}});2===Object(2)&&Object.isExtensible(2)&&Object.defineProperty(2,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"APPLYTYPE",filename:"src/components/order/constant.js"}});"PRINT"===Object("PRINT")&&Object.isExtensible("PRINT")&&Object.defineProperty("PRINT","__filemeta",{enumerable:!0,configurable:!0,value:{name:"PRINT",filename:"src/components/order/constant.js"}});"BATCHBEIHUO"===Object("BATCHBEIHUO")&&Object.isExtensible("BATCHBEIHUO")&&Object.defineProperty("BATCHBEIHUO","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHBEIHUO",filename:"src/components/order/constant.js"}});"BATCHZHIZUO"===Object("BATCHZHIZUO")&&Object.isExtensible("BATCHZHIZUO")&&Object.defineProperty("BATCHZHIZUO","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHZHIZUO",filename:"src/components/order/constant.js"}});"BATCHFAHUO"===Object("BATCHFAHUO")&&Object.isExtensible("BATCHFAHUO")&&Object.defineProperty("BATCHFAHUO","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHFAHUO",filename:"src/components/order/constant.js"}});"BATCHJIEDAN"===Object("BATCHJIEDAN")&&Object.isExtensible("BATCHJIEDAN")&&Object.defineProperty("BATCHJIEDAN","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHJIEDAN",filename:"src/components/order/constant.js"}});"BATCHWANCHENG"===Object("BATCHWANCHENG")&&Object.isExtensible("BATCHWANCHENG")&&Object.defineProperty("BATCHWANCHENG","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHWANCHENG",filename:"src/components/order/constant.js"}});var X=[{label:"\u5168\u90e8",value:""},{label:"\u666e\u901a\u8ba2\u5355",value:1},{label:"\u9884\u552e\u8ba2\u5355",value:2}];"undefined"!==typeof X&&X&&X===Object(X)&&Object.isExtensible(X)&&Object.defineProperty(X,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ORDERTYPE",filename:"src/components/order/constant.js"}});function K(e){return new Promise((function(t,n){return U({url:"order/admin-order-main-list",method:"POST",data:Object.assign(Y(e),{page:e.current})}).then((function(e){if(200===e.data.code){var a=e.data.data,r=a.list,o=a.total,i=r.map((function(e){return{orderNo:e.order_no,createTime:e.create_time,payStatus:e.pay_status,phone:e.phone,realPrice:(1*e.real_price/100).toFixed(2),transPrice:(1*e.trans_price/100).toFixed(2),orderPayWay:e.order_pay_way,orderPayTime:e.order_pay_time}}));t({list:i,total:+o})}else n(e.data.msg)}))}))}function V(e){return new Promise((function(t,n){return U({url:"order/admin-order-sub-list",method:"POST",data:Object.assign(Y(e),{page:e.current})}).then((function(e){if(200===e.data.code){var a=e.data.data,r=a.list,o=a.total,i=r.map((function(e){return{orderSubNo:e.order_sub_no,orderStatus:e.order_status,orderType:e.order_type,deliveryType:e.delivery_type,shopName:e.shop_name,createTime:e.create_time,receiveName:e.receive_name,phone:e.phone,pickCode:e.pick_code,realPrice:(1*e.real_price/100).toFixed(2),transPrice:(1*e.trans_price/100).toFixed(2),orderPayWay:e.order_pay_way,address:e.address,canRefundTrans:e.can_refund_trans,canCancel:e.can_cancel,product:e.product.map((function(e){return{id:e.product_id,productName:e.product_name,productNumber:e.product_number,productPriceSum:(1*e.product_price_sum/100).toFixed(2)}}))}}));t({list:i,total:+o})}else n(e.data.msg)}))}))}function q(e){return new Promise((function(t,n){return U({url:"order/admin-order-detail",method:"POST",data:Y(e)}).then((function(e){if(200===e.data.code){var a=e.data.data;t({orderNo:a.order_no+"",orderSubNo:a.order_sub_no+"",status:a.order_status+"",deliveryType:a.delivery_type+"",notes:a.notes+""||"--",transportationExpenses:(1*a.transportation_expenses/100).toFixed(2),historyStatusList:a.status.map((function(e){return{createTime:e.create_time,status:e.order_status+""}})),orderPayWay:Array.isArray(a.order_pay_way)?a.order_pay_way:[],shopInfo:{shopAddress:a.shop_info&&a.shop_info.address,shopName:a.shop_info&&a.shop_info.shop_name,concatName:a.shop_info&&a.shop_info.concat_name,concatMobile:a.shop_info&&a.shop_info.concat_mobile,remarks:a.remarks},expectArriveTimeStart:a.expect_arrive_time_start,expectArriveTimeEnd:a.expect_arrive_time_end,expectArriveTime:"".concat(a.expect_arrive_time_start," ~ ").concat(a.expect_arrive_time_end,"  "),finishTime:a.finish_time,orderResource:a.order_resource,pickCode:a.pick_code,originPrice:(1*a.origin_price/100).toFixed(2),couponValue:(1*a.coupon_value/100).toFixed(2)||"0.00",realPrice:(1*a.real_price/100).toFixed(2),receiveName:a.address_info&&a.address_info.receive_name,phone:a.address_info&&a.address_info.phone,address:a.address_info&&a.address_info.address,productList:a.product.map((function(e){return{productThumbImg:e.product_thumb_img,productNumber:e.product_number,productSn:e.product_sn,productName:e.product_name,norms:e.norms,price:(1*e.sale_unit_price/100).toFixed(2),sumPrice:(1*e.product_price_sum/100).toFixed(2),realSumPrice:(1*e.real_unit_price/100*e.product_number).toFixed(2),realPrice:(1*e.real_unit_price/100).toFixed(2),productPriceSum:(1*e.product_price_sum/100).toFixed(2)}})),logList:a.status.map((function(e){return{operatorName:e.operator_name,updateTime:e.update_time,operatorStatus:M[e.order_status+""]}})),mainInfoUserName:a.main_info&&a.main_info.user_name,mainInfoPhone:a.main_info&&a.main_info.phone})}else n(e.data.msg)}))}))}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){return U({url:"order/refund/product-list",method:"POST",data:Y(e)}).then((function(e){if(200===e.data.code){var a=e.data.data;t(a.map((function(e){return{productId:e.product_id,productName:e.product_name,barcode:e.barcode,productSn:e.product_sn,productThumbImg:e.product_thumb_img,saleUnitPrice:(1*e.sale_unit_price/100).toFixed(2),refundUnitPrice:(1*e.refund_unit_price/100).toFixed(2),productNumber:1*e.product_number,payPrice:((1*e.sale_unit_price-e.discount_price)/100*e.product_number*1).toFixed(2),refundableNum:1*e.refundable_num,refundNum:0,refundTotalPrice:0===e.refundableNum?0:(1*e.sale_unit_price/100).toFixed(2),hasWight:e.product_weight>0,productWeight:Number(e.product_weight/1e3).toFixed(2),productAllWeight:Number(e.product_all_weight/1e3).toFixed(2),productAllRefundWeight:Number(e.product_all_refund_weight/1e3).toFixed(2),pickWeight:0,refundWeight:0,productAllRefundSum:0}})))}else n(e.data.msg)}))}))}function Q(e){return new Promise((function(t,n){U({url:"order/modify-status",method:"POST",data:Object.assign(Y(e),{extra:{operator_id:window.localStorage.getItem("userId"),operator_name:window.localStorage.getItem("userName"),operator_mobile:window.localStorage.getItem("userMobile")}})}).then((function(e){200===e.data.code?t():n(e.data.msg)}))}))}function ee(e){return new Promise((function(t,n){U({url:"order/refund-order-trans",method:"POST",data:Object.assign(Y(e),{extra:{operator_name:window.localStorage.getItem("userName"),operator_mobile:window.localStorage.getItem("userMobile")}})}).then((function(e){200===e.data.code?t():n(e.data.msg)}))}))}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=R(),n=t.ROOTPATH,a=t.basic;return"cp_plus"===a.mp_platform?new Promise((function(e,t){U({url:"".concat(n,"company/list"),method:"POST",data:{limit:1e5,offset:0}}).then((function(n){if(200===n.data.code){var a=n.data.data.data;a=a.map((function(e){return{label:e.company_name,value:e.company_id}})),e({list:a})}else t(n.data.msg)})).catch((function(e){console.log(e,"company/list")}))})):"cp_cook"===a.mp_platform?new Promise((function(t,r){U({url:"".concat(n,"admin/org/company/lists"),params:Object(s.a)(Object(s.a)({id:a.mp_company,name:""},e),{},{page:0,size:1e4})}).then((function(e){if(0===e.data.code){var n=e.data.data.list;n=n.map((function(e){return{label:e.name,value:e.id}})),t({list:n})}else r(e.data.msg)})).catch((function(e){console.log(e,"admin/org/company/lists")}))})):void 0}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=R(),n=t.ROOTPATH,a=t.basic;if("cp_plus"===a.mp_platform){var r=e.companyId;return new Promise((function(e,t){U({url:"".concat(n,"shop/list"),method:"POST",data:{company_id:r,limit:1e5,offset:0}}).then((function(n){if(200===n.data.code){var a=n.data.data.data;a=a.map((function(e){return{label:e.shop_name,value:e.shop_id}})),e({list:a})}else t(n.data.msg)})).catch((function(e){console.log(e,"shop/list")}))}))}if("cp_cook"===a.mp_platform)return new Promise((function(t,a){var r=window.localStorage.getItem("companyId");U({url:"".concat(n,"admin/org/store/lists"),params:Object(s.a)({company_id:r},Y(e))}).then((function(e){if(0===e.data.code){var n=e.data.data.list;n=n.map((function(e){return{label:e.name,value:e.id}})),t({list:n})}else a(e.data.msg)})).catch((function(e){console.log(e,"admin/org/store/lists")}))}))}function ae(e){return new Promise((function(e,t){return U({url:"order/refund/reason",method:"POST",data:{}}).then((function(n){if(200===n.data.code){var a=n.data.data.map((function(e){return{reasonId:e.reason_id,reasonInfo:e.reason_info}}));e(a)}else t(n.data.msg)}))}))}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){return U({url:"order/refund/price",method:"POST",data:Y(e)}).then((function(e){200===e.data.code?t((e.data.data.refund_price/100).toFixed(2)):n(e.data.msg)}))}))}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){var a=e.productInfo;return e.productInfo=L(a),U({url:"order/refund/apply",method:"POST",data:Y(e)}).then((function(e){200===e.data.code?t({res:e}):n(e.data.msg)}))}))}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){return U({url:"https://gateway-cp-kitchen-api-dev.cpgroupcloud.com/mp/opinion/upload-img",method:"POST",data:Y(e)}).then((function(e){200===e.data.code?t({res:e}):n(e.data.msg)}))}))}function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){return U({url:"order/export-order-csv",method:"POST",data:Y(e)}).then((function(e){200===e.data.code?t(e.data):n(e.data.msg)}))}))}K&&K===Object(K)&&Object.isExtensible(K)&&Object.defineProperty(K,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getParentOrderListApi",filename:"src/components/Order/api.js"}}),V&&V===Object(V)&&Object.isExtensible(V)&&Object.defineProperty(V,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getChildOrderListApi",filename:"src/components/Order/api.js"}}),q&&q===Object(q)&&Object.isExtensible(q)&&Object.defineProperty(q,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getChildOrderDetailApi",filename:"src/components/Order/api.js"}}),$&&$===Object($)&&Object.isExtensible($)&&Object.defineProperty($,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getProductListApi",filename:"src/components/Order/api.js"}}),Q&&Q===Object(Q)&&Object.isExtensible(Q)&&Object.defineProperty(Q,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"modifyOrderStatusApi",filename:"src/components/Order/api.js"}}),ee&&ee===Object(ee)&&Object.isExtensible(ee)&&Object.defineProperty(ee,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"refundOrderTransApi",filename:"src/components/Order/api.js"}}),te&&te===Object(te)&&Object.isExtensible(te)&&Object.defineProperty(te,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getCompanyListApi",filename:"src/components/Order/api.js"}}),ne&&ne===Object(ne)&&Object.isExtensible(ne)&&Object.defineProperty(ne,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getShopListApi",filename:"src/components/Order/api.js"}}),ae&&ae===Object(ae)&&Object.isExtensible(ae)&&Object.defineProperty(ae,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getReasonApi",filename:"src/components/Order/api.js"}}),re&&re===Object(re)&&Object.isExtensible(re)&&Object.defineProperty(re,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getPriceApi",filename:"src/components/Order/api.js"}}),oe&&oe===Object(oe)&&Object.isExtensible(oe)&&Object.defineProperty(oe,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"afterSaleApplyApi",filename:"src/components/Order/api.js"}}),ie&&ie===Object(ie)&&Object.isExtensible(ie)&&Object.defineProperty(ie,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"uploadImgApi",filename:"src/components/Order/api.js"}}),ce&&ce===Object(ce)&&Object.isExtensible(ce)&&Object.defineProperty(ce,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"exportCSVApi",filename:"src/components/Order/api.js"}});var se={100:"\u5f85\u4ed8\u6b3e",200:"\u4ed8\u6b3e\u5b8c\u6210",300:"\u5907\u8d27\u4e2d",400:"\u5f85\u914d\u9001",410:"\u914d\u9001\u4e2d",500:"\u5236\u4f5c\u4e2d",510:"\u5f85\u53d6\u9910",600:"\u5f85\u81ea\u63d0",700:"\u8ba2\u5355\u5b8c\u6210",800:"\u8ba2\u5355\u53d6\u6d88\u4e2d",900:"\u8ba2\u5355\u5df2\u53d6\u6d88"};"undefined"!==typeof se&&se&&se===Object(se)&&Object.isExtensible(se)&&Object.defineProperty(se,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ORDERSTATUS",filename:"src/components/Order/constant.js"}});var le={0:"\u672a\u652f\u4ed8",1:"\u5df2\u652f\u4ed8"};"undefined"!==typeof le&&le&&le===Object(le)&&Object.isExtensible(le)&&Object.defineProperty(le,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PAYSTATUS",filename:"src/components/Order/constant.js"}});var de={1:"\u5916\u5356",2:"\u81ea\u63d0",3:"\u5802\u98df"};"undefined"!==typeof de&&de&&de===Object(de)&&Object.isExtensible(de)&&Object.defineProperty(de,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DELIVERYTYPE",filename:"src/components/Order/constant.js"}});var ue={1:"\u5fae\u4fe1",2:"\u50a8\u503c"};"undefined"!==typeof ue&&ue&&ue===Object(ue)&&Object.isExtensible(ue)&&Object.defineProperty(ue,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PAYTYPE",filename:"src/components/Order/constant.js"}});var me={9:"\u4f18\u9c9c",14:"cpcook"};"undefined"!==typeof me&&me&&me===Object(me)&&Object.isExtensible(me)&&Object.defineProperty(me,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ORDERRESOURCE",filename:"src/components/Order/constant.js"}});var pe=[{text:"\u4ec5\u9000\u6b3e",value:"1",hideCondition:{}},{text:"\u9000\u6b3e\u4e14\u9000\u8d27",value:"2",hideCondition:{1:{code:["200","300","400"]},2:{code:["200","300","600"]},3:{code:[]}}}];"undefined"!==typeof pe&&pe&&pe===Object(pe)&&Object.isExtensible(pe)&&Object.defineProperty(pe,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"REFUNDTYPES",filename:"src/components/Order/constant.js"}});2===Object(2)&&Object.isExtensible(2)&&Object.defineProperty(2,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"APPLYTYPE",filename:"src/components/Order/constant.js"}});"PRINT"===Object("PRINT")&&Object.isExtensible("PRINT")&&Object.defineProperty("PRINT","__filemeta",{enumerable:!0,configurable:!0,value:{name:"PRINT",filename:"src/components/Order/constant.js"}});"BATCHBEIHUO"===Object("BATCHBEIHUO")&&Object.isExtensible("BATCHBEIHUO")&&Object.defineProperty("BATCHBEIHUO","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHBEIHUO",filename:"src/components/Order/constant.js"}});"BATCHZHIZUO"===Object("BATCHZHIZUO")&&Object.isExtensible("BATCHZHIZUO")&&Object.defineProperty("BATCHZHIZUO","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHZHIZUO",filename:"src/components/Order/constant.js"}});"BATCHFAHUO"===Object("BATCHFAHUO")&&Object.isExtensible("BATCHFAHUO")&&Object.defineProperty("BATCHFAHUO","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHFAHUO",filename:"src/components/Order/constant.js"}});"BATCHJIEDAN"===Object("BATCHJIEDAN")&&Object.isExtensible("BATCHJIEDAN")&&Object.defineProperty("BATCHJIEDAN","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHJIEDAN",filename:"src/components/Order/constant.js"}});"BATCHWANCHENG"===Object("BATCHWANCHENG")&&Object.isExtensible("BATCHWANCHENG")&&Object.defineProperty("BATCHWANCHENG","__filemeta",{enumerable:!0,configurable:!0,value:{name:"BATCHWANCHENG",filename:"src/components/Order/constant.js"}});var fe=[{label:"\u5168\u90e8",value:""},{label:"\u666e\u901a\u8ba2\u5355",value:1},{label:"\u9884\u552e\u8ba2\u5355",value:2}];"undefined"!==typeof fe&&fe&&fe===Object(fe)&&Object.isExtensible(fe)&&Object.defineProperty(fe,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ORDERTYPE",filename:"src/components/Order/constant.js"}});var be=n("./node_modules/moment/moment.js"),Oe=n.n(be);function _e(e){var t=new Date(1e3*parseInt(e)),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),o=t.getHours(),i=t.getMinutes(),c=t.getSeconds();return n+"-"+je(a)+"-"+je(r)+" "+je(o)+":"+je(i)+":"+je(c)}function je(e){return e<10?"0"+e:e}function ge(e,t){return!(!e||!t)&&("string"===typeof e&&(e=Oe()(e)),"string"===typeof t&&(t=Oe()(t)),console.log("\u65f6\u95f4\u5dee:",t.diff(e,"months",!0)),t.diff(e,"months",!0)>3)}function ve(e){var t=Oe()(Date.now()).format("YYYY-MM-DD");return{startTime:Oe()(t).subtract("months",e).format("YYYY-MM-DD"),endTime:t}}ve&&ve===Object(ve)&&Object.isExtensible(ve)&&Object.defineProperty(ve,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getThreeMonthRange",filename:"src/util/date.js"}}),ge&&ge===Object(ge)&&Object.isExtensible(ge)&&Object.defineProperty(ge,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isExceedRange",filename:"src/util/date.js"}}),_e&&_e===Object(_e)&&Object.isExtensible(_e)&&Object.defineProperty(_e,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"formatDate",filename:"src/util/date.js"}});var Pe=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={filters:[{title:"\u4e3b\u8ba2\u5355\u53f7",name:"orderNo"},{title:"\u521b\u5efa\u65f6\u95f4",name:"createTime",dataSource:T},{title:"\u652f\u4ed8\u65b9\u5f0f",name:"orderPayWay",dataSource:[{label:"\u5168\u90e8",value:""},{label:"\u5fae\u4fe1",value:"1"},{label:"\u50a8\u503c",value:"2"}]},{title:"\u652f\u4ed8\u72b6\u6001",name:"orderPayStatus",dataSource:[{label:"\u5168\u90e8",value:""},{label:"\u672a\u4ed8\u6b3e",value:"0"},{label:"\u5df2\u4ed8\u6b3e",value:"1"}]},{title:"\u7528\u6237\u624b\u673a\u53f7",name:"phone"}],dataSource:[],columns:[{title:"\u4e3b\u8ba2\u5355\u53f7",dataIndex:"orderNo",align:"center",width:260},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",align:"center"},{title:"\u652f\u4ed8\u72b6\u6001",dataIndex:"payStatus",align:"center",render:function(e){return le[e]}},{title:"\u7528\u6237\u624b\u673a\u53f7",dataIndex:"phone",align:"center",width:130},{title:"\u8ba2\u5355\u91d1\u989d\uff08\u5143\uff09",dataIndex:"realPrice",align:"center"},{title:"\u8fd0\u8d39\uff08\u5143\uff09",dataIndex:"transPrice",align:"center"},{title:"\u652f\u4ed8\u65b9\u5f0f",dataIndex:"orderPayWay",align:"center",render:function(e){return e.map((function(e){return ue[e]})).join(" | ")}},{title:"\u652f\u4ed8\u65f6\u95f4",dataIndex:"orderPayTime",align:"center"},{title:"\u64cd\u4f5c",dataIndex:"operation",align:"center",fixed:"right",width:120,render:function(t,n){return o.a.createElement(o.a.Fragment,null,o.a.createElement("a",{onClick:function(){return e.onLinkRouter(n.orderNo)}},"\u67e5\u770b\u5b50\u5355"))}}],pageInfo:{current:1,pageSize:10},loading:{tableLoading:!1},filterParams:{}},e.cacheParams={},e.onLinkRouter=function(t){e.setPageParams(),e.props.history.push({pathname:"/order/order_list_child/".concat(t)})},e.setPageParams=function(){var t=e.state.pageInfo;t.current,t.pageSize},e.getListPageProps=function(t){e.listPageProps=t},e.getParentOrder=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.cacheParams,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state.pageInfo,a=e.state.loading;a.tableLoading||(e.setState({loading:Object.assign({},a,{tableLoading:!0})}),K(Object.assign({},n,t)).then((function(r){var o=r.list,i=r.total;e.setState({dataSource:o,loading:Object.assign({},a,{tableLoading:!1}),pageInfo:Object.assign({},n,{total:i})}),e.cacheParams=t})).catch((function(e){l.a.error(e)})))},e.onChangePage=function(t,n){e.getParentOrder(e.cacheParams,{current:t,pageSize:n})},e.onSearch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.createTime&&t.createTime[0]&&(t.startTime=t.createTime[0].format("YYYY-MM-DD"),t.endTime=t.createTime[1].format("YYYY-MM-DD"),delete t.createTime,ge(t.startTime,t.endTime))?l.a.error("\u65f6\u95f4\u8303\u56f4\u4e0d\u80fd\u8d85\u8fc73\u4e2a\u6708"):(e.setState({filterParams:t}),e.getParentOrder(t,Object(s.a)(Object(s.a)({},e.state.pageInfo),{},{page:1})))},e.onReset=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.onChangePage(Object.assign({},t,{page:1,page_size:10}))},e.onRefresh=function(){e.getParentOrder()},e.onExport=function(){var t,n,a=e.state.pageInfo,r=a.page,o=a.pageSize,i=e.state.filterParams;if(t=i.startTime,n=i.endTime,console.log(t,n),t&&n)t=i.startTime,n=i.endTime;else{var c=ve(3);t=c.startTime,n=c.endTime}var d=Object(s.a)({page:r,pageSize:o,userId:window.localStorage.getItem("userId")},Object(s.a)(Object(s.a)({},i),{},{startTime:t,endTime:n}));console.log("\u5bfc\u51fa\u63a5\u53e3\u53c2\u6570",d),ce(d).then((function(e){var t=e.data;window.open(t,"_self")})).catch((function(e){l.a.error(e)}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getParentOrder()}},{key:"render",value:function(){var e=this.state;e.dataSource,e.columns,e.filters,e.pageInfo;return o.a.createElement("div",null,"listPage \u7ec4\u4ef6")}}]),n}(r.Component),he=Pe;"undefined"!==typeof Pe&&Pe&&Pe===Object(Pe)&&Object.isExtensible(Pe)&&Object.defineProperty(Pe,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ParentOrder",filename:"src/components/Order/container/ParentOrderContainer.js"}});var ye=he;"undefined"!==typeof he&&he&&he===Object(he)&&Object.isExtensible(he)&&Object.defineProperty(he,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Order",filename:"src/components/Order/index.js"}});var Te=["components"],Ee={};function Ae(e){var t=e.components,n=Object(a.a)(e,Te);return Object(i.b)("wrapper",Object.assign({},Ee,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"order"},"Order"),Object(i.b)(c.d,{of:ye,mdxType:"Props"}),Object(i.b)("h2",{id:"basic-usage"},"Basic usage"),Object(i.b)(c.c,{__position:1,__code:'<Order>Click me</Order>\n<Order kind="secondary">Click me</Order>',__scope:{props:this?this.props:n,Playground:c.c,Props:c.d,Order:ye},__codesandbox:"undefined",mdxType:"Playground"},Object(i.b)(ye,{mdxType:"Order"},"Click me"),Object(i.b)(ye,{kind:"secondary",mdxType:"Order"},"Click me")))}Ae&&Ae===Object(Ae)&&Object.isExtensible(Ae)&&Object.defineProperty(Ae,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"src/components/Order/index.mdx"}}),Ae.isMDXComponent=!0}}]);